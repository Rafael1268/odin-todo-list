(()=>{"use strict";const e=document.querySelector("#addTaskBtn"),t=document.querySelector(".newTask"),n=document.querySelector("#newProject"),r=document.querySelector(".newProjectForm"),a=document.querySelector("#taskExpandClose"),o=document.querySelector(".taskExpandContainer"),c=document.querySelector("#taskEditCancel"),i=document.querySelector(".taskEditContainer"),s=document.querySelector("#taskEditSubmit"),d=[{transform:"scale(1)"},{transform:"scale(0)"}];function l(e){const t=document.createElement("div");t.className="taskItem",t.id=e.taskId;const n=document.createElement("div");n.className="taskItemL",t.appendChild(n);const r=document.createElement("div");r.className="taskItemR",t.appendChild(r);const a=document.createElement("button");switch(a.classList.add("taskDoneBtn"),e.priority){case"1":a.classList.add("prior1");break;case"2":a.classList.add("prior2");break;case"3":a.classList.add("prior3")}n.appendChild(a),a.addEventListener("click",(()=>function(e){const t=Number(e.target.parentElement.parentElement.id),n=B.findIndex((e=>e.taskId===t));-1!==n&&(!1===B[n].taskDone?B[n].taskDone=!0:B[n].taskDone=!1,u(B),X())}(event)));const o=document.createElement("p");o.innerText=e.task,n.appendChild(o),!0===e.taskDone&&(a.classList.add("taskDone"),o.classList.add("taskComplete"));const c=document.createElement("h6");c.innerText=e.date,r.appendChild(c);const i=document.createElement("button");i.className="deleteBtn",i.innerHTML='<i class="fa-solid fa-trash"></i>',r.appendChild(i),i.addEventListener("click",(()=>function(e){const t=Number(e.target.parentElement.parentElement.parentElement.id),n=B.findIndex((e=>e.taskId===t));var r;-1!==n&&(B.splice(n,1),r=t,B.forEach((e=>r<e.taskId?void(e.taskId=e.taskId-1):void 0)),function(e){document.querySelectorAll("div.taskItem").forEach((t=>e<t.id?void(t.id=t.id-1):void 0))}(t),u(B),X())}(event)));const s=document.createElement("button");s.className="editBtn",s.innerHTML='<i class="fa-solid fa-pen-to-square"></i>',r.appendChild(s),s.addEventListener("click",(()=>function(e){const t=event.target.parentElement.parentElement.parentElement.id,n=B.findIndex((e=>e.taskId===Number(t)));if(-1===n)return;const r=B[n];J=B[n],function(e,t,n,r,a,o){document.querySelector("#editName").value=e,document.querySelector("#editDesc").value=t,document.querySelector("#editDate").value=n,document.querySelector("#editPrior").value=r;const c=document.querySelector("#editProject");o.forEach((e=>{const t=document.createElement("option");t.innerText=e.project,t.value=e.project,c.appendChild(t)})),c.value=a}(r.task,r.description,r.date,r.priority,r.project,z),document.querySelector(".taskEditContainer").classList.remove("hideTaskExpand"),document.querySelector(".taskEditField").animate(Q,250)}())),taskDisplay.appendChild(t),t.addEventListener("click",(()=>function(e){if("BUTTON"===e.target.tagName||"I"===e.target.tagName)return;let t;t="DIV"!==e.target.tagName?e.target.parentElement.parentElement.id:e.target.id;const n=B.findIndex((e=>e.taskId===Number(t)));if(-1===n)return;const r=B[n];!function(e,t,n,r,a){document.querySelector("#expandName").innerText=e;document.querySelector("#expandDesc").innerText=""===t?"No Description Set":t;document.querySelector("#expandDate").innerText=""===n?"No Date Set":n,document.querySelector("#expandPrior").innerText=r;document.querySelector("#expandProject").innerText=""===a?"No Project Set":a}(r.task,r.description,r.date,r.priority,r.project),document.querySelector(".taskExpandContainer").classList.remove("hideTaskExpand"),document.querySelector(".taskExpand").animate(Q,250)}(event)))}function u(e){try{return localStorage.setItem("tasksArray",JSON.stringify(e)),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&storage&&0!==storage.length}}function m(e){try{return localStorage.setItem("projectsArray",JSON.stringify(e)),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&storage&&0!==storage.length}}e.addEventListener("click",(()=>t.classList.toggle("hideTaskField"))),n.addEventListener("click",(()=>r.classList.toggle("hideProjectField"))),a.addEventListener("click",(()=>{document.querySelector(".taskExpand").animate(d,150),setTimeout((function(){o.classList.add("hideTaskExpand")}),150)})),c.addEventListener("click",(()=>{document.querySelector(".taskEditField").animate(d,150),setTimeout((function(){i.classList.add("hideTaskExpand")}),150)})),s.addEventListener("click",(()=>function(){const e=document.querySelector("#editName"),t=document.querySelector("#editDesc"),n=document.querySelector("#editDate"),r=document.querySelector("#editPrior"),a=document.querySelector("#editProject");J.task=e.value,J.description=t.value,J.date=n.value,J.priority=r.value,J.project=a.value,u(B),X();const o=document.querySelector(".taskEditContainer");document.querySelector(".taskEditField").animate(W,150),setTimeout((function(){o.classList.add("hideTaskExpand")}),150)}())),Math.pow(10,8);var p=36e5;function f(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function k(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function y(e,t){f(1,arguments);var n=t||{},r=null==n.additionalDigits?2:k(n.additionalDigits);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var a,o=E(e);if(o.date){var c=T(o.date,r);a=D(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);var i,s=a.getTime(),d=0;if(o.time&&(d=w(o.time),isNaN(d)))return new Date(NaN);if(!o.timezone){var l=new Date(s+d),u=new Date(0);return u.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),u.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),u}return i=j(o.timezone),isNaN(i)?new Date(NaN):new Date(s+d+i)}var v={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},g=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,h=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,S=/^([+-])(\d{2})(?::?(\d{2}))?$/;function E(e){var t,n={},r=e.split(v.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],v.timeZoneDelimiter.test(n.date)&&(n.date=e.split(v.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var a=v.timezone.exec(t);a?(n.time=t.replace(a[1],""),n.timezone=a[1]):n.time=t}return n}function T(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var a=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:null===o?a:100*o,restDateString:e.slice((r[1]||r[2]).length)}}function D(e,t){if(null===t)return new Date(NaN);var n=e.match(g);if(!n)return new Date(NaN);var r=!!n[4],a=N(n[1]),o=N(n[2])-1,c=N(n[3]),i=N(n[4]),s=N(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,i,s)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var a=7*(t-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+a),r}(t,i,s):new Date(NaN);var d=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(x[t]||(L(e)?29:28))}(t,o,c)&&function(e,t){return t>=1&&t<=(L(e)?366:365)}(t,a)?(d.setUTCFullYear(t,o,Math.max(a,c)),d):new Date(NaN)}function N(e){return e?parseInt(e):1}function w(e){var t=e.match(h);if(!t)return NaN;var n=q(t[1]),r=q(t[2]),a=q(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,a)?n*p+6e4*r+1e3*a:NaN}function q(e){return e&&parseFloat(e.replace(",","."))||0}function j(e){if("Z"===e)return 0;var t=e.match(S);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,a)?n*(r*p+6e4*a):NaN}var x=[31,null,31,30,31,30,31,31,30,31,30,31];function L(e){return e%400==0||e%4==0&&e%100!=0}function b(e){f(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function C(e){f(1,arguments);var t=b(e);return t.setHours(0,0,0,0),t}function I(e,t){f(2,arguments);var n=C(e),r=C(t);return n.getTime()===r.getTime()}function P(e,t){f(1,arguments);var n=t||{},r=n.locale,a=r&&r.options&&r.options.weekStartsOn,o=null==a?0:k(a),c=null==n.weekStartsOn?o:k(n.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var i=b(e),s=i.getDay(),d=(s<c?7:0)+s-c;return i.setDate(i.getDate()-d),i.setHours(0,0,0,0),i}function O(e,t,n){f(2,arguments);var r=P(e,n),a=P(t,n);return r.getTime()===a.getTime()}const M=document.querySelector("#newTaskBtn"),U=document.querySelector("#sortBy"),A=document.querySelector("#searchbar"),F=document.querySelectorAll("button.sidebarBtn"),H=document.querySelector("#newProjectDone"),R=document.querySelector(".deleteProject");M.addEventListener("click",(()=>function(){const e=document.querySelector("#newTaskTxt"),t=document.querySelector("#newTaskDesc"),n=document.querySelector("#newTaskDate"),r=document.querySelector("#newTaskPriority"),a=document.querySelector("#newTaskProject"),o=document.querySelector(".newTask");if(""===e.value)return alert('Please fill in the "Task Name" field');const c=new G(e.value,t.value,n.value,r.value,a.value,B.length);B.push(c),u(B),o.classList.toggle("hideTaskField"),X()}())),U.addEventListener("change",(()=>X())),A.addEventListener("change",(()=>X())),F.forEach((e=>e.addEventListener("click",(()=>te(event))))),H.addEventListener("click",(()=>function(){const e=document.querySelector("#newProjectTxt"),t=document.querySelector(".newProjectForm");if(""===e.value)return alert('Please fill in the "Project Name" field');if(void 0!==z.find((t=>t.project===e.value)))return alert("That project already exists");const n=new K(e.value);z.push(n),m(z),t.classList.toggle("hideProjectField"),ee()}())),R.addEventListener("click",(()=>function(e){const t=event.target.parentElement.parentElement.firstElementChild.textContent.slice(1),n=z.findIndex((e=>e.project===t));-1!==n&&(z.splice(n,1),B.forEach((e=>{e.project===t&&(e.project="")})),$="all",m(z),u(B),X(),ee())}()));let B=[],_=[],Z=[],$="all",z=[],J="";const Q=[{transform:"scale(0)"},{transform:"scale(1)"}],W=[{transform:"scale(1)"},{transform:"scale(0)"}],Y=localStorage.getItem("tasksArray")?JSON.parse(localStorage.getItem("tasksArray")):[];B=Y,X();const V=localStorage.getItem("projectsArray")?JSON.parse(localStorage.getItem("projectsArray")):[];if(z=V,!V[0]){const e=new K("None");z.unshift(e)}function G(e,t,n,r,a,o){this.task=e,this.description=t,this.date=n,this.priority=r,this.project=a,this.taskId=o,this.taskDone=!1}function K(e){this.project=e}function X(){const e=document.querySelector("#taskDisplay");!function(){switch(document.querySelector("#sortBy").value){case"dateDown":B.sort(((e,t)=>e.taskId-t.taskId));break;case"dateUp":B.sort(((e,t)=>t.taskId-e.taskId));break;case"priorDown":B.sort(((e,t)=>e.priority-t.priority));break;case"priorUp":B.sort(((e,t)=>t.priority-e.priority))}}(),function(){const e=document.querySelector("#currentFilter");switch($){case"all":e.innerText="All Tasks",R.classList.add("hideDeleteProject"),_=B;break;case"today":e.innerText="Due Today",R.classList.add("hideDeleteProject"),function(){const e=B.filter((e=>function(e){return f(1,arguments),I(e,Date.now())}(y(e.date))));_=e}();break;case"week":e.innerText="Due This Week",R.classList.add("hideDeleteProject"),function(){const e=B.filter((e=>function(e,t){return f(1,arguments),O(e,Date.now(),t)}(y(e.date))));_=e}();break;case"past":e.innerText="Past Due",R.classList.add("hideDeleteProject"),function(){const e=B.filter((e=>function(e){return f(1,arguments),b(e).getTime()<Date.now()}(y(e.date))));_=e}();break;case" None":e.innerText="Tasks Without A Project",R.classList.add("hideDeleteProject"),ne();break;default:e.innerText=$,R.classList.remove("hideDeleteProject"),ne()}}(),function(){""===A.value&&(Z=_);const e=_.filter((e=>e.task.toLowerCase().includes(A.value.toLowerCase())));Z=e}(),e.innerHTML="",Z.forEach((e=>{l(e)}))}function ee(){const e=document.querySelector("#projectsDisplay"),t=document.querySelector("#newTaskProject");e.innerHTML="",t.innerHTML="",z.forEach((e=>function(e){const t=document.querySelector("#projectsDisplay"),n=document.createElement("button");n.className="sidebarBtn",n.innerHTML=`<i class="fa-solid fa-folder fa-fw"></i> ${e.project}`,t.appendChild(n),n.addEventListener("click",(()=>te(event)));const r=document.querySelector("#newTaskProject"),a=document.createElement("option");a.value=e.project,a.innerText=e.project,r.appendChild(a)}(e)))}function te(e){switch(e.target.textContent){case" All Tasks":$="all";break;case" Today":$="today";break;case" This Week":$="week";break;case" Past Due":$="past";break;case" None":$=" None";break;default:$=e.target.textContent}X()}function ne(){const e=B.filter((e=>{const t=$.slice(1);return e.project===t}));_=e}ee()})();