(()=>{"use strict";const e=document.querySelector("#addTaskBtn"),t=document.querySelector(".newTask");function a(e){const t=document.createElement("div");t.className="taskItem",t.id=e.taskId;const a=document.createElement("div");a.className="taskItemL",t.appendChild(a);const s=document.createElement("div");s.className="taskItemR",t.appendChild(s);const r=document.createElement("button");switch(r.classList.add("taskDoneBtn"),e.priority){case"1":r.classList.add("prior1");break;case"2":r.classList.add("prior2");break;case"3":r.classList.add("prior3")}a.appendChild(r),r.addEventListener("click",(()=>function(e){const t=Number(e.target.parentElement.parentElement.id),a=c.findIndex((e=>e.taskId===t));-1!==a&&(!1===c[a].taskDone?c[a].taskDone=!0:c[a].taskDone=!1,n(c),u())}(event)));const o=document.createElement("p");o.innerText=e.task,a.appendChild(o),!0===e.taskDone&&(r.classList.add("taskDone"),o.classList.add("taskComplete"));const d=document.createElement("h6");d.innerText=e.date,s.appendChild(d);const i=document.createElement("button");i.className="deleteBtn",i.innerHTML='<i class="fa-solid fa-trash"></i>',s.appendChild(i),i.addEventListener("click",(()=>function(e){const t=Number(e.target.parentElement.parentElement.parentElement.id),a=c.findIndex((e=>e.taskId===t));var s;-1!==a&&(c.splice(a,1),s=t,c.forEach((e=>s<e.taskId?void(e.taskId=e.taskId-1):void 0)),function(e){document.querySelectorAll("div.taskItem").forEach((t=>e<t.id?void(t.id=t.id-1):void 0))}(t),n(c),u())}(event))),taskDisplay.appendChild(t)}function n(e){try{return localStorage.setItem("storageArray",JSON.stringify(e)),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&storage&&0!==storage.length}}e.addEventListener("click",(()=>t.classList.toggle("hideTaskField")));const s=document.querySelector("#newTaskBtn"),r=document.querySelector("#sortBy"),o=document.querySelector("#searchbar");s.addEventListener("click",(()=>function(){const e=document.querySelector("#newTaskTxt"),t=document.querySelector("#newTaskDate"),a=document.querySelector("#newTaskPriority"),s=document.querySelector("#newTaskProject"),r=new l(e.value,t.value,a.value,s.value,c.length);c.push(r),n(c),u()}())),r.addEventListener("change",(()=>u())),o.addEventListener("change",(()=>u()));let c=[],d=[];const i=localStorage.getItem("storageArray")?JSON.parse(localStorage.getItem("storageArray")):[];function l(e,t,a,n,s){this.task=e,this.date=t,this.priority=a,this.project=n,this.taskId=s,this.taskDone=!1}function u(){const e=document.querySelector("#taskDisplay");!function(){switch(document.querySelector("#sortBy").value){case"dateDown":c.sort(((e,t)=>e.taskId-t.taskId));break;case"dateUp":c.sort(((e,t)=>t.taskId-e.taskId));break;case"priorDown":c.sort(((e,t)=>e.priority-t.priority));break;case"priorUp":c.sort(((e,t)=>t.priority-e.priority))}}(),function(){""===o.value&&(d=c);const e=c.filter((e=>e.task.toLowerCase().includes(o.value.toLowerCase())));d=e}(),e.innerHTML="",d.forEach((e=>{a(e)}))}c=i,u()})();